!function(s){var t={inputSel:"dgwt-wcas-options-toggle input[type=radio]",groupSel:"dgwt_wcas_settings-group",reloadChoices:function(t){var e=s('[name="'+t+'"]').closest("."+this.groupSel),a=s('[name="'+t+'"]:checked').val(),i="";this.hideAll(e),(a=a.replace("_","-")).length>0&&(i="wcas-opt-"+a),s("."+i).length>0&&s("."+i).fadeIn()},hideAll:function(s){s.find('tr[class*="wcas-opt-"]').hide()},registerListeners:function(){var t=this;s("."+t.inputSel).on("change",function(){t.reloadChoices(s(this).attr("name"))})},init:function(){var t=this,e=s("."+t.inputSel+":checked");e.length>0&&(t.registerListeners(),e.each(function(){t.reloadChoices(s(this).attr("name"))}))}},e={inputSel:"dgwt-wcas-options-cb-toggle input[type=checkbox]",groupSel:"dgwt_wcas_settings-group",reloadChoices:function(t){var e=t.is(":checked"),a=this.getGroupSelector(t);s("."+a+":not(.dgwt-wcas-options-cb-toggle)").hide(),e&&s("."+a).each(function(){s(this).hasClass("js-dgwt-wcas-adv-settings")&&s(".js-dgwt-wcas-adv-settings-toggle").hasClass("woocommerce-input-toggle--disabled")||s(this).fadeIn()})},getGroupSelector(t){var e=t.closest(".dgwt-wcas-options-cb-toggle"),a="",i=e.attr("class").split(/\s+/);return s.each(i,function(s,t){-1!==t.indexOf("js-dgwt-wcas-cbtgroup-")&&(a=t)}),a},registerListeners:function(){var t=this;s(document).on("change","."+t.inputSel,function(){t.reloadChoices(s(this))})},refresh:function(){var t=this,e=s("."+t.inputSel);e.length>0&&e.each(function(){var e=s(this).is(":checked"),a=t.getGroupSelector(s(this));e?s("."+a).fadeIn():s("."+a+":not(.dgwt-wcas-options-cb-toggle)").hide()})},init:function(){var t=this,e=s("."+t.inputSel);e.length>0&&(t.registerListeners(),e.each(function(){t.reloadChoices(s(this))}))}},a={inputSel:"js-dgwt-wcas-options-toggle-sibling input[type=checkbox]",toogleSibling:function(s){s.is(":checked")?s.closest("label").next().fadeIn():s.closest("label").next().hide()},registerListeners:function(){var t=this;s(document).on("change","."+t.inputSel,function(){t.toogleSibling(s(this))})},init:function(){var t=this,e=s("."+t.inputSel);e.length>0&&(t.registerListeners(),e.each(function(){t.toogleSibling(s(this))}))}},i={layoutSelect:"select[id*='search_layout']",overlayMobile:"input[id*='enable_mobile_overlay']",switchLayoutBreakpoint:"input[id*='mobile_breakpoint']",mobileOverlayBreakpoint:"input[id*='mobile_overlay_breakpoint']",searchIconColor:"input[id*='search_icon_color']",$layoutSelectEl:null,$overlayMobileEl:null,$switchLayoutBreakpointEl:null,$mobileOverlayBreakpointEl:null,$searchIconColorEl:null,setConditions:function(){var t=this.$layoutSelectEl.find("option:selected").val(),e=this.$overlayMobileEl.is(":checked"),a=s(".js-dgwt-wcas-adv-settings-toggle").hasClass("woocommerce-input-toggle--enabled");switch(this.hideOption(this.$switchLayoutBreakpointEl),this.hideOption(this.$mobileOverlayBreakpointEl),this.hideOption(this.$searchIconColorEl),s("input[id*='bg_search_icon_color']").closest("tr").show(),t){case"icon":a&&this.showOption(this.$searchIconColorEl);break;case"icon-flexible":case"icon-flexible-inv":a&&(this.showOption(this.$switchLayoutBreakpointEl),this.showOption(this.$searchIconColorEl));break;default:a&&s("input[id*='bg_search_icon_color']").closest("tr").hide()}e&&this.showOption(this.$mobileOverlayBreakpointEl)},hideOption:function(s){s.closest("tr").hide()},showOption:function(s){s.closest("tr").show()},registerListeners:function(){var s=this;s.$layoutSelectEl.on("change",function(){s.setConditions()}),s.$overlayMobileEl.on("change",function(){s.setConditions()})},init:function(){var t=this,e=s(t.layoutSelect);e.length>0&&(t.$layoutSelectEl=e,t.$overlayMobileEl=s(t.overlayMobile),t.$switchLayoutBreakpointEl=s(t.switchLayoutBreakpoint),t.$mobileOverlayBreakpointEl=s(t.mobileOverlayBreakpoint),t.$searchIconColorEl=s(t.searchIconColor),t.registerListeners(),setTimeout(function(){t.setConditions()},400))}},o={actionTriggerClass:"js-ajax-build-index",actionStopTriggerClass:"js-ajax-stop-build-index",indexingWrappoerClass:"js-dgwt-wcas-indexing-wrapper",indexerTabProgressClass:"js-dgwt-wcas-indexer-tab-progress",indexerTabErrorClass:"js-dgwt-wcas-indexer-tab-error",indexerMenuErrorClass:"dgwt-wcas-menu-warning-icon",getWrapper:function(){return s("."+this.indexingWrappoerClass).closest(".dgwt-wcas-settings-info")},registerListeners:function(){var t=this;s(document).on("click","."+t.actionTriggerClass,function(e){e.preventDefault();var a=s(this);a.attr("disabled","disabled"),s(".dgwt-wcas-settings-info").addClass("wcas-ajax-build-index-wait"),s("."+t.indexerTabErrorClass).removeClass("active"),s("."+t.indexerTabProgressClass).addClass("active");var i=!!a.hasClass("js-ajax-build-index-emergency");i&&(s(".dgwt-wcas-indexing-header__title").text("[Emergency mode] Wait... Indexing in progress"),s(".dgwt-wcas-indexing-header__troubleshooting, .dgwt-wcas-indexing-header__actions, .js-dgwt-wcas-indexer-details").hide()),s.ajax({url:ajaxurl,type:"post",data:{action:"dgwt_wcas_build_index",emergency:i,_wpnonce:dgwt_wcas.nonces.build_index},success:function(s){void 0!==s&&s.success&&(t.getWrapper().html(s.data.html),t.heartbeat())},complete:function(){a.removeAttr("disabled"),s(".dgwt-wcas-settings-info").removeClass("wcas-ajax-build-index-wait"),i&&window.location.reload()}})}),s(document).on("click","."+t.actionStopTriggerClass,function(e){e.preventDefault(),s(this).attr("disabled","disabled"),t.getWrapper().attr("data-stopping","1"),s.ajax({url:ajaxurl,type:"post",data:{action:"dgwt_wcas_stop_build_index",_wpnonce:dgwt_wcas.nonces.stop_build_index},success:function(s){void 0!==s&&s.success&&(t.getWrapper().html(s.data.html),t.heartbeat())},complete:function(){t.getWrapper().attr("data-stopping","0")}})})},heartbeat:function(){var t=this;setTimeout(function(){s.ajax({url:ajaxurl,type:"post",data:{action:"dgwt_wcas_build_index_heartbeat",_wpnonce:dgwt_wcas.nonces.build_index_heartbeat},success:function(e){void 0!==e&&e.success&&"1"!==t.getWrapper().attr("data-stopping")&&(t.getWrapper().html(e.data.html),e.data.loop?t.heartbeat():(s("."+t.indexerTabProgressClass).removeClass("active"),"error"===e.data.status?s("."+t.indexerTabErrorClass).addClass("active"):"completed"===e.data.status&&s("."+t.indexerMenuErrorClass).remove()),e.data.loop||!(e.data.refresh_once.length>0)||document.cookie.split(";").some(function(s){return 0===s.trim().indexOf("dgwt_wcas_refresh_once="+e.data.refresh_once)})||"none"!==s("#dgwt_wcas_troubleshooting-tab").css("display")||(document.cookie="dgwt_wcas_refresh_once="+e.data.refresh_once,location.reload()))}})},1e3)},detailsToggle:function(){var t;s(document).on("click",".js-dgwt-wcas-indexing-details-trigger",function(e){e.preventDefault();var a=s(".js-dgwt-wcas-indexer-details");a.hasClass("show")?(a.removeClass("show"),a.addClass("hide"),s(".js-dgwt-wcas-indexing__showd").addClass("show").removeClass("hide"),s(".js-dgwt-wcas-indexing__hided").addClass("hide").removeClass("show"),t=!1):(a.addClass("show"),a.removeClass("hide"),s(".js-dgwt-wcas-indexing__showd").addClass("hide").removeClass("show"),s(".js-dgwt-wcas-indexing__hided").addClass("show").removeClass("hide"),t=!0),s.ajax({url:ajaxurl,type:"post",data:{action:"dgwt_wcas_index_details_toggle",display:t}})})},init:function(){this.registerListeners(),s("."+this.indexingWrappoerClass).length>0&&this.heartbeat(),this.detailsToggle()}},n={init:function(){var t=this;s(".dgwt-wcas-selectize").length>0&&s.ajax({url:ajaxurl,data:{action:"dgwt_wcas_settings_list_custom_fields",_wpnonce:s(".dgwt-wcas-selectize").data("security")},success:function(s){void 0!==s&&void 0!==s.data&&t.initSelectize(s.data)}})},initSelectize:function(t){var e=s(".dgwt-wcas-selectize");e.length>0&&e.each(function(){var e=s(this),a=e.data("options"),i=t;if(a.length>0){a=JSON.parse('["'+decodeURI(a.replace(/&/g,'","').replace(/=/g,'","'))+'"]');var o="";a.forEach(function(s,t){if((t+1)%2==0){var e={value:s,label:o};i.push(e),o=""}o=s})}s(this).selectize({persist:!1,maxItems:null,valueField:"key",labelField:"label",searchField:["value","label"],options:i,create:function(s){return{value:s.key,label:s.label}},load:function(t,a){if(!t.length)return a();s.ajax({url:ajaxurl,data:{action:"dgwt_wcas_settings_list_custom_fields",_wpnonce:e.data("security")},error:function(){a()},success:function(s){a(s.data)}})}})})}},c={init:function(){var t=s(".js-dgwt-wcas-tooltip");t.length>0&&t.each(function(){var t=s(this)[0],e=s(this).data("tooltip-html-el"),a=s(this).data("tooltip-placement");e&&new DgwtWcasTooltip(t,{title:s("."+e+" > .dgwt-wcas-tooltip-wrapper")[0],placement:a,trigger:"hover",html:!0})})}},r={advClass:"js-dgwt-wcas-adv-settings",highlightClass:"dgwt-wcas-opt-highlight",transClass:"dgwt-wcas-opt-transition",init:function(){this.clickListener(),this.setStartingState()},clickListener:function(){var t=this;s(document).on("click",".js-dgwt-wcas-settings__advanced",function(){var e;e=s(".js-dgwt-wcas-adv-settings-toggle").hasClass("woocommerce-input-toggle--disabled")?"show":"hide",t.saveChoice(e)})},setStartingState:function(){var t=s("."+this.advClass);t.length>0&&(s(".js-dgwt-wcas-adv-settings-toggle").hasClass("woocommerce-input-toggle--enabled")?(t.show(),e.refresh()):t.hide())},saveChoice:function(t){s(".js-dgwt-wcas-settings__advanced").append('<span class="dgwt-wcas-adv-settings-saving">saving...</span>'),s.ajax({url:ajaxurl,data:{_wpnonce:dgwt_wcas.nonces.advanced_options_switch,action:"dgwt_wcas_adv_settings",adv_settings_value:t}}).done(function(t){s(".dgwt-wcas-adv-settings-saving").remove()});var e=s(".js-dgwt-wcas-adv-settings-toggle");"show"===t&&(e.removeClass("woocommerce-input-toggle--disabled"),e.addClass("woocommerce-input-toggle--enabled")),"hide"===t&&(e.removeClass("woocommerce-input-toggle--enabled"),e.addClass("woocommerce-input-toggle--disabled")),this.toggleAdvancedOpt(t)},toggleAdvancedOpt:function(t){var a=this,o=s("."+a.advClass);o.length>0&&(o.addClass(a.highlightClass),o.addClass(a.transClass),"show"===t&&o.fadeIn(500,function(){setTimeout(function(){o.removeClass(a.highlightClass),setTimeout(function(){o.removeClass(a.transClass),e.refresh(),i.setConditions()},500)},500)}),"hide"===t&&setTimeout(function(){o.removeClass(a.transClass),o.fadeOut(500,function(){o.removeClass(a.highlightClass)})},500))}},l={placeholderClass:"js-dgwt-wcas-stats-placeholder",placeholderClassLoaded:"js-dgwt-wcas-stats-placeholder-loaded",preloaderClass:"dgwt-wcas-stats-preloader",settingsGroupSel:"#dgwt_wcas_analytics",criticalSearchesLoadMoreClass:"js-dgwt-wcas-critical-searches-load-more",autocompleteWithResultsLoadMoreClass:"js-dgwt-wcas-autocomplete-with-results-load-more",searchPageWithResultsLoadMoreClass:"js-dgwt-wcas-search-page-with-results-load-more",checkPhraseStatusClass:"js-dgwt-wcas-stats-critical-check",checkPhraseStatusInitClass:"js-dgwt-wcas-stats-critical-check-init",rowLoadingClass:"dgwt-wcas-analytics-row-loading",languageSwitcherClass:"js-dgwt-wcas-analytics-lang",excludePhraseClass:"js-dgwt-wcas-analytics-exclude-phrase",checkIndexerAction:"js-dgwt-wcas-analytics-check-indexer",resetAnalyticsAction:"js-dgwt-wcas-analytics-reset",analyticsExportCSVAction:"js-dgwt-wcas-analytics-export-csv",init:function(){void 0!==dgwt_wcas.analytics&&dgwt_wcas.analytics.enabled&&this.interfaceLoaderListener()},interfaceLoaderListener:function(){var t=this,e=s("."+t.languageSwitcherClass);s(document).on("dgwt_wcas_settings_group_active",function(e,a){s(a).length>0&&"dgwt_wcas_analytics"===a.id&&!t.isLoaded()&&t.loadInterface()}),e.length>0&&e.on("change",function(){var e=s("."+t.placeholderClass);e.length>0&&(e.html(""),t.loadInterface())})},isLoaded:function(){return s("."+this.placeholderClassLoaded).length>0},showPreloader:function(){var t=s("."+this.placeholderClass),e='<img class="'+this.preloaderClass+'" src="'+dgwt_wcas.analytics.images.placeholder+'" />';t.length&&t.append(e)},loadInterface:function(){var t=this,e=s("."+t.languageSwitcherClass+" option:selected");t.showPreloader();var a={action:"dgwt_wcas_load_stats_interface",_wpnonce:dgwt_wcas.analytics.nonce.analytics_load_interface};e.length>0&&(a.lang=e.val()),s.post(ajaxurl,a,function(e){var a=s("."+t.placeholderClass);"object"==typeof e&&e.success&&a.length>0&&(a.addClass(t.placeholderClassLoaded),a.html(e.data.html),t.loadCheckCriticalSearchesListeners(),t.loadMoreListeners(),t.resetStatsListener(),t.exportStatsListener())})},loadCheckCriticalSearchesListeners:function(){var t=this,e=s("."+t.checkPhraseStatusClass+":not(."+t.checkPhraseStatusInitClass+")");e.on("click",function(e){e.preventDefault(),s(e.target).after('<img src="'+dgwt_wcas.images.admin_preloader_url+'" />'),t.checkPhraseStatus(s(e.target))}),e.each(function(){s(this).addClass(t.checkPhraseStatusInitClass)})},loadMoreListeners:function(){var t=this;s("."+t.criticalSearchesLoadMoreClass).on("click",function(e){e.preventDefault(),s(this).before('<img src="'+dgwt_wcas.images.admin_preloader_url+'" />'),s(this).closest("tr").addClass(t.rowLoadingClass),t.loadMoreCriticalSearches()}),s("."+t.autocompleteWithResultsLoadMoreClass).on("click",function(e){e.preventDefault(),t.loadMorePhrases("autocomplete",s(e.target))}),s("."+t.searchPageWithResultsLoadMoreClass).on("click",function(e){e.preventDefault(),t.loadMorePhrases("search-page",s(e.target))})},resetStatsListener:function(){s("."+this.resetAnalyticsAction).on("click",function(t){var e=s(this);if(t.preventDefault(),confirm(dgwt_wcas.analytics.labels.reset_stats_confirm)){var a={action:"dgwt_wcas_reset_stats",_wpnonce:dgwt_wcas.analytics.nonce.reset_stats};e.next().addClass("loading"),s.post(ajaxurl,a,function(s){location.reload()})}})},exportStatsListener:function(){var t=s("."+this.languageSwitcherClass+" option:selected");s("."+this.analyticsExportCSVAction).on("click",function(e){s(this),e.preventDefault();var a=new URL(dgwt_wcas.adminurl);a.searchParams.append("action","dgwt_wcas_export_stats_csv"),a.searchParams.append("context",s(this).data("context")),a.searchParams.append("_wpnonce",dgwt_wcas.analytics.nonce.export_stats_csv),t.length>0&&a.searchParams.append("lang",t.val()),window.location=a})},checkPhraseStatus:function(t){var e=this,a=s("."+e.languageSwitcherClass+" option:selected"),i={action:"dgwt_wcas_check_critical_phrase",phrase:t.closest("tr").find("td:nth-child(2)").text(),_wpnonce:dgwt_wcas.analytics.nonce.check_critical_phrase};a.length>0&&(i.lang=a.val()),s.post(ajaxurl,i,function(a){if("object"==typeof a&&a.success){var i=t.closest("tr");t.closest("td").html(a.data.html);var o=i.find("."+e.excludePhraseClass),n=i.find("."+e.checkIndexerAction);o.length>0&&o.on("click",function(t){t.preventDefault(),s(t.target).closest("td").html("<p>Processing...</p>"),e.excludePhrase(i)}),n.length>0&&s("."+e.checkIndexerAction).on("click",function(t){t.preventDefault();var e=s("#dgwt_wcas_performance-tab");e.length>0&&(e[0].click(),s([document.documentElement,document.body]).animate({scrollTop:0},1e3))})}})},excludePhrase:function(t){var e=s("."+this.languageSwitcherClass+" option:selected"),a={action:"dgwt_wcas_exclude_critical_phrase",phrase:t.find("td:nth-child(2)").text(),_wpnonce:dgwt_wcas.analytics.nonce.exclude_critical_phrase};e.length>0&&(a.lang=e.val()),s.post(ajaxurl,a,function(s){"object"==typeof s&&s.success&&(t.addClass("dgwt-wcas-analytics-disable-row"),t.find("td:last-child").html(s.data))})},loadMoreCriticalSearches:function(){var t=this,e=s("."+t.languageSwitcherClass+" option:selected"),a={action:"dgwt_wcas_laod_more_critical_searches",loaded:s(".js-dgwt-wcas-critical-searches-row").length,_wpnonce:dgwt_wcas.analytics.nonce.load_more_critical_searches};e.length>0&&(a.lang=e.val()),s.post(ajaxurl,a,function(e){if("object"==typeof e&&e.success){var a=s("."+t.criticalSearchesLoadMoreClass).closest("tr");e.data.html.length>0&&a.before(e.data.html),e.data.more>0?(a.removeClass(t.rowLoadingClass),a.find("img").remove(),s("."+t.criticalSearchesLoadMoreClass+" span:first-child").text(e.data.more_label)):a.remove(),t.loadCheckCriticalSearchesListeners()}})},loadMorePhrases:function(t,e){var a=s("."+this.languageSwitcherClass+" option:selected");if(e.before('<img src="'+dgwt_wcas.images.admin_preloader_url+'" />'),e.closest("tr").addClass(this.rowLoadingClass),"autocomplete"===t)var i={action:"dgwt_wcas_laod_more_autocomplete",loaded:s(".js-dgwt-wcas-autocomplete-row").length,_wpnonce:dgwt_wcas.analytics.nonce.load_more_autocomplete};else var i={action:"dgwt_wcas_laod_more_search_page",loaded:s(".js-dgwt-wcas-search-page-row").length,_wpnonce:dgwt_wcas.analytics.nonce.load_more_search_page};a.length>0&&(i.lang=a.val()),s.post(ajaxurl,i,function(s){"object"==typeof s&&s.success&&e.closest("tbody").html(s.data.html)})}};window.DGWT_WCAS_SEARCH_PREVIEW={previewWrapper:{},searchWrapp:{},suggestionWrapp:{},searchInput:{},animateTypingInterval:null,init:function(){var t=this;t.previewWrapper=s(".js-dgwt-wcas-preview"),t.searchWrapp=s(".js-dgwt-wcas-search-wrapp"),t.suggestionWrapp=s(".js-dgwt-wcas-suggestions-wrapp"),t.detailsWrapp=s(".js-dgwt-wcas-details-wrapp"),t.searchInput=s(".js-dgwt-wcas-search-input"),t.onChangeHandler(),t.onColorHandler(),t.onTypeHandler(),t.disableSubmit(),t.noResultsHandler(),t.fixSizesInit(),t.keepPreviewVisible(),t.animationController()},isChecked:function(s){return!!(s.length>0&&s.is(":checked"))},isColor:function(s){return"string"==typeof s&&7===s.length&&"#"===s.charAt(0)},camelCase:function(s){for(var t=s.split("_"),e="",a=0;a<t.length;a++)e+=t[a].charAt(0).toUpperCase()+t[a].slice(1);return e},disableSubmit:function(){var t,e;s(".js-dgwt-wcas-preview-source").on("click",function(a){a.preventDefault();var i=a.pageX-100,o=a.pageY+10;void 0!==t&&(clearTimeout(t),e&&e.remove()),s("body").append('<div class="dgwt-wcas-click-alert">No interaction! This is only a preview.</div>'),(e=s(".dgwt-wcas-click-alert")).css({left:i,top:o}),s(".dgwt-wcas-preview-source").addClass("dgwt-wcas-preview-source-no-click"),t=setTimeout(function(){e.fadeOut(500,function(){s(this).remove(),s(".dgwt-wcas-preview-source").removeClass("dgwt-wcas-preview-source-no-click")})},2e3)})},noResultsHandler:function(){var t=this,e=".js-dgwt-wcas-preview .dgwt-wcas-suggestion:not(.js-dgwt-wcas-suggestion-nores)",a=".js-dgwt-wcas-suggestion-nores",i="input[id*='search_no_results_text']";s(document).on("focus",i,function(){s(e).addClass("dgwt-wcas-hide"),s(a).removeClass("dgwt-wcas-hide"),t.detailsWrapp.addClass("dgwt-wcas-hide"),t.suggestionWrapp.addClass("dgwt-wcas-preview-nores")}),s(document).on("blur",i,function(){s(e).removeClass("dgwt-wcas-hide"),s(a).addClass("dgwt-wcas-hide"),t.detailsWrapp.removeClass("dgwt-wcas-hide"),t.suggestionWrapp.removeClass("dgwt-wcas-preview-nores")})},onChangeHandler:function(){for(var t=this,e=["show_submit_button","max_form_width","search_style","search_layout","show_product_image","show_product_sku","show_product_desc","show_product_price","show_matching_categories","show_categories_images","show_matching_tags","show_matching_brands","show_brands_images","show_matching_posts","show_matching_pages","show_grouped_results","suggestions_limit","show_details_box"],a=0;a<e.length;a++){var i=["search_style","search_layout"].includes(e[a])?"select":"input",o=i+"[id='dgwt_wcas_settings\\["+e[a]+"\\]']",n=i+"[id^='dgwt_wcas_settings'][data-option-trigger='"+e[a]+"']",c=s(o),r=s(n),l="onChange"+t.camelCase(e[a]);"function"==typeof t[l]&&c.length>0?(t[l](c,c.val()),s(document).on("change",o,function(){l=s(this).attr("id").replace("]","").replace("dgwt_wcas_settings[",""),"function"==typeof t[l="onChange"+t.camelCase(l)]&&t[l](s(this),this.value)})):"function"==typeof t[l]&&r.length>0?(t[l](r,r.val()),s(document).on("change",n,function(){l=s(this).data("option-trigger"),"function"==typeof t[l="onChange"+t.camelCase(l)]&&t[l](s(this),this.value)})):t[l]("","")}},onColorHandler:function(){for(var t=this,e=["search_icon_color","bg_input_color","text_input_color","border_input_color","bg_submit_color","text_submit_color","sug_bg_color","sug_hover_color","sug_text_color","sug_highlight_color","sug_border_color"],a=0;a<e.length;a++){var i="input[id*='"+e[a]+"']",o=s(i),n="onColor"+t.camelCase(e[a]);t[n](o,o.val()),s(document).on("change",i,function(){n=s(this).attr("id").replace("]","").replace("dgwt_wcas_settings[",""),t[n="onColor"+t.camelCase(n)](s(this),this.value)})}},onColorChangeHandler:function(s,t){var e=s.attr("id").replace("]","").replace("dgwt_wcas_settings[","");this[e="onColor"+this.camelCase(e)](s,t)},onTypeHandler:function(){for(var t=this,e=["search_submit_text","search_placeholder","search_no_results_text","search_see_all_results_text"],a=0;a<e.length;a++){var i="input[id*='"+e[a]+"']",o=s(i),n="onType"+t.camelCase(e[a]);t[n](o,o.val()),s(document).on("input",i,function(e){n=s(e.target).attr("id").replace("]","").replace("dgwt_wcas_settings[",""),t[n="onType"+t.camelCase(n)](s(e.target),this.value)})}},onChangeMaxFormWidth:function(t,e){e.length>0&&"0"!=e?(this.searchWrapp.css("max-width",e+"px"),this.suggestionWrapp.css("max-width",e+"px")):(this.searchWrapp.css("max-width","100%"),this.suggestionWrapp.css("max-width","100%")),this.onChangeShowDetailsBox(s("input[id*='show_details_box']"))},onChangeShowSubmitButton:function(t,e){var a=this,i=s(".js-dgwt-wcas-search-submit");if(a.isChecked(t)){a.searchWrapp.addClass("dgwt-wcas-has-submit"),a.searchWrapp.removeClass("dgwt-wcas-no-submit"),i.show(),s(".dgwt-wcas-sf-wrapp > .dgwt-wcas-ico-magnifier").hide();var o=s("input[id*='bg_submit_color']"),n=s("input[id*='text_submit_color']");a.onColorBgSubmitColor(o,o.val()),a.onColorTextSubmitColor(n,n.val()),setTimeout(function(){a.positionPreloader()},10)}else a.searchWrapp.addClass("dgwt-wcas-no-submit"),a.searchWrapp.removeClass("dgwt-wcas-has-submit"),i.hide(),s(".dgwt-wcas-sf-wrapp > .dgwt-wcas-ico-magnifier").show(),a.positionPreloader()},onChangeShowProductImage:function(t,e){var a=s(".js-dgwt-wcas-si"),i=s(".js-dgwt-wcas-content-wrapp");this.isChecked(t)?(this.suggestionWrapp.addClass("dgwt-wcas-has-img"),s(".dgwt-wcas-suggestion-product > .dgwt-wcas-st").remove(),s(".dgwt-wcas-suggestion-product > .dgwt-wcas-sp").remove(),i.show(),a.show()):(this.suggestionWrapp.removeClass("dgwt-wcas-has-img"),i.each(function(){s(this).closest(".dgwt-wcas-suggestion-product").append(s(this).html())}),i.hide(),a.hide())},onChangeShowProductSku:function(t,e){var a=s(".js-dgwt-wcas-sku");this.isChecked(t)?(this.suggestionWrapp.addClass("dgwt-wcas-has-sku"),a.show()):(this.suggestionWrapp.removeClass("dgwt-wcas-has-sku"),a.hide())},onChangeShowProductDesc:function(t,e){var a=s(".js-dgwt-wcas-sd");this.isChecked(t)?(this.suggestionWrapp.addClass("dgwt-wcas-has-desc"),a.show()):(this.suggestionWrapp.removeClass("dgwt-wcas-has-desc"),a.hide())},onChangeShowProductPrice:function(t,e){var a=s(".js-dgwt-wcas-sp");this.isChecked(t)?(this.suggestionWrapp.addClass("dgwt-wcas-has-price"),a.show()):(this.suggestionWrapp.removeClass("dgwt-wcas-has-price"),a.hide())},onChangeShowMatchingCategories:function(t,e){var a=s(".dgwt-wcas-suggestion-headline-cat"),i=s(".dgwt-wcas-suggestion-cat");this.isChecked(t)?(a.show(),i.show(),i.removeClass("js-dgwt-wcas-suggestion-hidden"),this.onChangeShowGroupedResults(s("input[id*='show_grouped_results']"))):(a.hide(),i.hide(),i.addClass("js-dgwt-wcas-suggestion-hidden"));var o=s("input[id*='suggestions_limit']");this.onChangeSuggestionsLimit(o,o.val())},onChangeShowCategoriesImages:function(t,e){var a=s(".js-dgwt-wcas-suggestion-cat");this.isChecked(t)?a.addClass("dgwt-wcas-has-img"):a.removeClass("dgwt-wcas-has-img")},onChangeShowMatchingTags:function(t,e){var a=s(".dgwt-wcas-suggestion-headline-tag"),i=s(".dgwt-wcas-suggestion-tag");this.isChecked(t)?(a.show(),i.show(),i.removeClass("js-dgwt-wcas-suggestion-hidden"),this.onChangeShowGroupedResults(s("input[id*='show_grouped_results']"))):(a.hide(),i.hide(),i.addClass("js-dgwt-wcas-suggestion-hidden"));var o=s("input[id*='suggestions_limit']");this.onChangeSuggestionsLimit(o,o.val())},onChangeShowMatchingBrands:function(t,e){var a=s(".dgwt-wcas-suggestion-headline-brand"),i=s(".dgwt-wcas-suggestion-brand");this.isChecked(t)?(a.show(),i.show(),i.removeClass("js-dgwt-wcas-suggestion-hidden"),this.onChangeShowGroupedResults(s("input[id*='show_grouped_results']"))):(a.hide(),i.hide(),i.addClass("js-dgwt-wcas-suggestion-hidden"));var o=s("input[id*='suggestions_limit']");this.onChangeSuggestionsLimit(o,o.val())},onChangeShowBrandsImages:function(t,e){var a=s(".js-dgwt-wcas-suggestion-brand");this.isChecked(t)?a.addClass("dgwt-wcas-has-img"):a.removeClass("dgwt-wcas-has-img")},onChangeShowMatchingPosts:function(t,e){var a=s(".dgwt-wcas-suggestion-headline-post"),i=s(".dgwt-wcas-suggestion-post");this.isChecked(t)?(a.show(),i.show(),i.removeClass("js-dgwt-wcas-suggestion-hidden"),this.onChangeShowGroupedResults(s("input[id*='show_grouped_results']"))):(a.hide(),i.hide(),i.addClass("js-dgwt-wcas-suggestion-hidden"));var o=s("input[id*='suggestions_limit']");this.onChangeSuggestionsLimit(o,o.val())},onChangeShowMatchingPages:function(t,e){var a=s(".dgwt-wcas-suggestion-headline-page"),i=s(".dgwt-wcas-suggestion-page");this.isChecked(t)?(a.show(),i.show(),i.removeClass("js-dgwt-wcas-suggestion-hidden"),this.onChangeShowGroupedResults(s("input[id*='show_grouped_results']"))):(a.hide(),i.hide(),i.addClass("js-dgwt-wcas-suggestion-hidden"));var o=s("input[id*='suggestions_limit']");this.onChangeSuggestionsLimit(o,o.val())},onChangeShowGroupedResults:function(t,e){var a=s(".dgwt-wcas-st--direct-headline"),i=s(".dgwt-wcas-suggestion-headline");this.isChecked(t)?(a.addClass("dgwt-wcas-hidden"),this.suggestionWrapp.addClass("dgwt-wcas-has-headings"),s(".dgwt-wcas-suggestion-headline").show(),this.isChecked(s("input[data-option-trigger='show_matching_categories']"))||s(".dgwt-wcas-suggestion-headline-cat").hide(),this.isChecked(s("input[data-option-trigger='show_matching_tags']"))||s(".dgwt-wcas-suggestion-headline-tag").hide(),this.isChecked(s("input[data-option-trigger='show_matching_brands']"))||s(".dgwt-wcas-suggestion-headline-brand").hide(),this.isChecked(s("input[id*='show_matching_posts']"))||s(".dgwt-wcas-suggestion-headline-post").hide(),this.isChecked(s("input[id*='show_matching_pages']"))||s(".dgwt-wcas-suggestion-headline-page").hide()):(a.removeClass("dgwt-wcas-hidden"),i.hide(),this.suggestionWrapp.removeClass("dgwt-wcas-has-headings"))},onChangeSuggestionsLimit:function(t,e){setTimeout(function(){var a=0,i=7,o=s(".dgwt-wcas-suggestion-duplicated"),n=["brand","cat","tag","post","page","product"];e.length>0&&"0"!=e&&(i=Math.abs(e)),o.length>0&&o.remove();var c=[];for(a=0;a<n.length;a++){var r=s(".dgwt-wcas-suggestion-"+n[a]+":not(.js-dgwt-wcas-suggestion-hidden)");r.length>0&&c.push(r)}var l=c.length;if(c.length>0)for(var d=i-c.length,g=c.length-1;d>0;){var h=c[g].clone();h.addClass("dgwt-wcas-suggestion-duplicated"),h.removeClass("dgwt-wcas-suggestion-selected"),c[g].after(h),l++,--g<0&&(g=c.length-1),d--}l>i&&t.val(l)},10)},onChangeShowDetailsBox:function(t,e){var a=this;a.isChecked(t)?(a.detailsWrapp.show(),a.searchWrapp.addClass("dgwt-wcas-is-detail-box"),a.previewWrapper.addClass("dgwt-wcas-is-details"),a.previewWrapper.addClass("dgwt-wcas-details-right"),setTimeout(function(){s(".dgwt-wcas-suggestion-product:not(.dgwt-wcas-suggestion-duplicated)").addClass("dgwt-wcas-suggestion-selected");var t=s(".js-dgwt-wcas-preview-bar-example");if(t.width()>=550){a.previewWrapper.addClass("dgwt-wcas-full-width");var e=getComputedStyle(t[0]).width;(e=Math.round(parseFloat(e.replace("px",""))))%2==0?(a.suggestionWrapp.css("width",Math.round(e/2)),a.detailsWrapp.css("width",Math.round(e/2))):(a.suggestionWrapp.css("width",Math.floor(e/2)),a.detailsWrapp.css("width",Math.ceil(e/2)))}else a.suggestionWrapp.width(a.searchWrapp.width())},10)):(a.detailsWrapp.hide(),a.searchWrapp.removeClass("dgwt-wcas-is-detail-box"),a.previewWrapper.removeClass("dgwt-wcas-is-details"),a.previewWrapper.removeClass("dgwt-wcas-details-right"),a.previewWrapper.removeClass("dgwt-wcas-full-width"),s(".dgwt-wcas-suggestion-product").removeClass("dgwt-wcas-suggestion-selected"),a.suggestionWrapp.css("width",""),a.detailsWrapp.css("width",""))},onChangeSearchStyle:function(t,e){var a,i=this,o=["solaris","pirx"],n=s('input[id*="show_submit_button"]'),c=s('label[for*="bg_submit_color"]');for(s(".dgwt-wcas-ico-magnifier").addClass("dgwt-wcas-hidden"),a=0;a<o.length;a++)s(".js-dgwt-wcas-preview").removeClass("dgwt-wcas-open-"+o[a]),s(".js-dgwt-wcas-search-wrapp").removeClass("dgwt-wcas-style-"+o[a]);if(s(".js-dgwt-wcas-ico-magnifier-"+e).removeClass("dgwt-wcas-hidden"),s(".js-dgwt-wcas-preview").addClass("dgwt-wcas-open-"+e),s(".js-dgwt-wcas-search-wrapp").addClass("dgwt-wcas-style-"+e),"solaris"===e&&(s('label[for*="show_submit_button"] .js-dgwt-wcas-tooltip').addClass("dgwt-wcas-hidden"),s('label[for*="search_submit_text"]').closest("tr").removeClass("dgwt-wcas-hidden"),s('input[id*="search_submit_text"]').prop("disabled",!1),c.closest("tr").removeClass("dgwt-wcas-hidden"),s('label[for*="text_submit_color"] > span:nth-child(1)').removeClass("dgwt-wcas-hidden"),s('label[for*="text_submit_color"] > span:nth-child(2)').addClass("dgwt-wcas-hidden"),n.prop("disabled",!1),s(".js-dgwt-wcas-submit-button-pirx-tooltip").removeClass("dgwt-wcas-hidden"),setTimeout(function(){i.positionPreloader()},300)),"pirx"===e){s('label[for*="show_submit_button"] .js-dgwt-wcas-tooltip').removeClass("dgwt-wcas-hidden"),s('label[for*="search_submit_text"]').closest("tr").addClass("dgwt-wcas-hidden"),s('input[id*="search_submit_text"]').prop("disabled",!0),s('label[for*="bg_submit_color"]').closest("tr").addClass("dgwt-wcas-hidden"),s('label[for*="text_submit_color"] > span:nth-child(2)').removeClass("dgwt-wcas-hidden"),s('label[for*="text_submit_color"] > span:nth-child(1)').addClass("dgwt-wcas-hidden"),s('input[id*="search_submit_text"]').val("");var r=c.closest("tr").find(".wp-picker-clear");r.length>0&&r[0].click(),i.onColorBgSubmitColor(),n.is(":checked")||n[0].click(),n.prop("disabled",!0),i.onTypeSearchSubmitText(s('input[id*="search_submit_text"]'),""),setTimeout(function(){i.positionPreloader()},10)}},onChangeSearchLayout:function(t,e){var a=s(".js-dgwt-wcas-preview-device-info"),i=s(".js-dgwt-wcas-preview-bar-example"),o=s(".js-dgwt-wcas-preview-icon-example");switch(s(".js-dgwt-wcas-preview-device-info > span").addClass("dgwt-wcas-hidden"),o.removeClass("dgwt-wcas-preview-icon-only"),e){case"classic":a.addClass("dgwt-wcas-hidden"),i.removeClass("dgwt-wcas-hidden"),o.addClass("dgwt-wcas-hidden");break;case"icon":a.addClass("dgwt-wcas-hidden"),i.addClass("dgwt-wcas-hidden"),o.removeClass("dgwt-wcas-hidden"),s(".dgwt-wcas-search-form").removeClass("dgwt-wcas-hidden"),s(".dgwt-wcas-search-icon-arrow").removeClass("dgwt-wcas-hidden"),o.addClass("dgwt-wcas-preview-icon-only");break;case"icon-flexible":a.removeClass("dgwt-wcas-hidden"),i.removeClass("dgwt-wcas-hidden"),o.removeClass("dgwt-wcas-hidden"),o.find(".dgwt-wcas-search-form").addClass("dgwt-wcas-hidden"),o.find(".dgwt-wcas-search-icon-arrow").addClass("dgwt-wcas-hidden"),s('.js-dgwt-wcas-preview-device-info[data-device="desktop"] span:nth-child(2)').removeClass("dgwt-wcas-hidden"),s('.js-dgwt-wcas-preview-device-info[data-device="mobile"] span:nth-child(1)').removeClass("dgwt-wcas-hidden");break;case"icon-flexible-inv":a.removeClass("dgwt-wcas-hidden"),i.removeClass("dgwt-wcas-hidden"),o.removeClass("dgwt-wcas-hidden"),o.find(".dgwt-wcas-search-form").addClass("dgwt-wcas-hidden"),o.find(".dgwt-wcas-search-icon-arrow").addClass("dgwt-wcas-hidden"),s('.js-dgwt-wcas-preview-device-info[data-device="desktop"] span:nth-child(1)').removeClass("dgwt-wcas-hidden"),s('.js-dgwt-wcas-preview-device-info[data-device="mobile"] span:nth-child(2)').removeClass("dgwt-wcas-hidden")}},onColorSearchIconColor:function(s,t){this.isColor(t)?this.searchWrapp.find(".dgwt-wcas-ico-magnifier-handler path").css("fill",t):this.searchWrapp.find(".dgwt-wcas-ico-magnifier-handler path").css("fill","")},onColorBgInputColor:function(s,t){this.isColor(t)?this.searchInput.css("background-color",t):this.searchInput.css("background-color","")},onColorTextInputColor:function(t,e){var a="dgwt-wcas-preview-placeholder-style";if(this.isColor(e)){var i='<style class="'+a+'">';i+=".dgwt-wcas-search-input {color:"+e+"!important;}",i+=".dgwt-wcas-ico-magnifier path {fill:"+e+"}",i+="</style>",s("head").append(i),this.searchInput.css("color",e)}else{this.searchInput.css("color","");var o=s("."+a);o.length>0&&o.remove()}},onColorBorderInputColor:function(s,t){this.isColor(t)?this.searchInput.css("border-color",t):this.searchInput.css("border-color","")},onColorBgSubmitColor:function(t,e){var a="dgwt-wcas-preview-submit-style";if(this.isChecked(s("input[id*='show_submit_button']"))&&this.isColor(e)){var i='<style class="'+a+'">';i+=".dgwt-wcas-search-submit::before{border-color: transparent "+e+"!important;}",i+=".dgwt-wcas-search-submit:hover::before{border-right-color: "+e+"!important;}",i+=".dgwt-wcas-search-submit:focus::before{border-right-color: "+e+"!important;}",i+=".dgwt-wcas-search-submit{background-color: "+e+"!important;}",i+=".dgwt-wcas-om-bar .dgwt-wcas-om-return{background-color: "+e+"!important;}",i+="</style>",s("head").append(i)}else{var o=s("."+a);o.length>0&&o.remove()}},onColorTextSubmitColor:function(t,e){this.isChecked(s("input[id*='show_submit_button']"))&&this.isColor(e)?(s(".js-dgwt-wcas-search-submit").css("color",e),s(".dgwt-wcas-search-submit .dgwt-wcas-ico-magnifier path").css("fill",e)):(this.searchInput.css("background-color",""),s(".js-dgwt-wcas-search-submit").css("color",""),s(".dgwt-wcas-search-submit .dgwt-wcas-ico-magnifier path").css("fill",""))},onColorSugBgColor:function(t,e){var a="dgwt-wcas-preview-sugbgcol-style";if(this.isColor(e)){var i='<style class="'+a+'">';i+=".dgwt-wcas-suggestions-wrapp,",i+=".dgwt-wcas-details-wrapp",i+="{background-color: "+e+"!important;}",i+="</style>",s("head").append(i)}else{var o=s("."+a);o.length>0&&o.remove()}},onColorSugHoverColor:function(t,e){this.isColor(e)?setTimeout(function(){s(".dgwt-wcas-suggestion-selected").css("background-color",e)},50):s(".dgwt-wcas-suggestion-selected").css("background-color","")},onColorSugTextColor:function(t,e){var a="dgwt-wcas-preview-sugtextcol-style";if(this.isColor(e)){var i='<style class="'+a+'">';i+=".dgwt-wcas-suggestions-wrapp *,",i+=".dgwt-wcas-details-wrapp *,",i+=".dgwt-wcas-sd,",i+=".dgwt-wcas-suggestion *",i+="{color: "+e+"!important;}",i+="</style>",s("head").append(i)}else{var o=s("."+a);o.length>0&&o.remove()}},onColorSugHighlightColor:function(t,e){var a="dgwt-wcas-preview-sughighlight-style";if(this.isColor(e)){var i='<style class="'+a+'">';i+=".dgwt-wcas-st strong,",i+=".dgwt-wcas-sd strong",i+="{color: "+e+"!important;}",i+="</style>",s("head").append(i)}else{var o=s("."+a);o.length>0&&o.remove()}},onColorSugBorderColor:function(t,e){var a="dgwt-wcas-preview-sugborder-style";if(this.isColor(e)){var i='<style class="'+a+'">';i+=".dgwt-wcas-suggestions-wrapp,",i+=".dgwt-wcas-details-wrapp,",i+=".dgwt-wcas-suggestion,",i+=".dgwt-wcas-datails-title,",i+=".dgwt-wcas-details-more-products",i+="{border-color: "+e+"!important;}",i+="</style>",s("head").append(i)}else{var o=s("."+a);o.length>0&&o.remove()}},onTypeSearchSubmitText:function(t,e){var a=s(".js-dgwt-wcas-search-submit-l"),i=s(".js-dgwt-wcas-search-submit-m");e.length>0?(a.text(e),a.show(),i.hide()):(a.text(""),a.hide(),i.show()),this.positionPreloader()},onTypeSearchPlaceholder:function(s,t){0==t.length&&(t=dgwt_wcas.labels.search_placeholder),this.searchInput.attr("placeholder",t)},onTypeSearchNoResultsText:function(t,e){0==e.length&&(e=dgwt_wcas.labels.no_results),s(".js-dgwt-wcas-suggestion-nores span").text(e)},onTypeSearchSeeAllResultsText:function(t,e){0==e.length&&(e=dgwt_wcas.labels.show_more),s(".js-dgwt-wcas-st-more-label").text(e)},positionPreloader:function(){var t=s(".js-dgwt-wcas-search-wrapp:not(.dgwt-wcas-hidden) .js-dgwt-wcas-search-submit"),e=t.is(":visible"),a=s("select[id*='search_style'] option:selected").val(),i=t.width()+35;"pirx"==a&&(i=38),e||"solaris"!=a||(i=7),s(".dgwt-wcas-preloader").css("right",i+"px")},fixSizesInit:function(){var t=this;s(document).on("click","#dgwt_wcas_autocomplete-tab",function(){t.onChangeShowDetailsBox(s("input[id*='show_details_box']"))})},keepPreviewVisible:function(){var t=s(".js-dgwt-wcas-preview-inner"),e=s(".js-dgwt-wcas-preview"),a=s(".js-dgwt-wcas-preview-source"),i=s(".dgwt-eq-settings-form");s(window).on("scroll.autocomplete",function(){var o,n=s(document).scrollTop(),c=e[0].getBoundingClientRect().top-40;if(c<0){if(a.offset().top+a.outerHeight(!1)<=Math.floor(i.offset().top+i.outerHeight(!1))-90)t.css("top",(-1*c<1?0:-1*c)+"px");else if(n+40<t.offset().top){var r=t.css("top").replace(/px/i,"")-10;t.css("top",r+"px")}}else t.css("top",0)})},animationController:function(){var t=this;s(window).on("load",function(){var e=s("#dgwt_wcas_form_body-tab");e.length&&e.hasClass("nav-tab-active")&&t.startAnimateTyping()}),s(".dgwt_wcas_settings-nav-tab-wrapper > a").on("click",function(){"dgwt_wcas_form_body-tab"===s(this).attr("id")?(t.stopAnimateTyping(),t.startAnimateTyping()):t.stopAnimateTyping()}),s(".dgwt_wcas_settings-nav-tab-wrapper > a").on("click",function(){"dgwt_wcas_form_body-tab"===s(this).attr("id")?(t.stopAnimateTyping(),t.startAnimateTyping()):t.stopAnimateTyping()}),s('input[id*="search_placeholder"]').on("focus",function(){t.stopAnimateTyping(),_this.searchInput.val("")}),s('input[id*="search_placeholder"]').on("blur",function(){t.startAnimateTyping()})},startAnimateTyping:function(){var t=this,e=0,a=s(".js-dgwt-wcas-search-wrapp"),i=s(".js-dgwt-wcas-search-input"),o=s(".dgwt-wcas-preloader"),n=s(".js-dgwt-wcas-preview-elements-close").html();t.animateTypingInterval=setInterval(function(){10==++e&&(i.val("f"),a.addClass("dgwt-wcas-search-filled"),a.addClass("dgwt-wcas-search-focused"),o.addClass("dgwt-wcas-close")),11===e&&i.val("fi"),12===e&&(i.val("fib"),o.append(n),t.positionPreloader()),13===e&&i.val("fibo"),14===e&&i.val("fibo "),15===e&&i.val("fibo s"),16===e&&i.val("fibo se"),17===e&&i.val("fibo sea"),18===e&&i.val("fibo sear"),19===e&&i.val("fibo searc"),20===e&&i.val("fibo search"),30===e&&i.val("fibo searc"),31===e&&i.val("fibo sear"),32===e&&i.val("fibo sea"),33===e&&i.val("fibo se"),34===e&&i.val("fibo s"),35===e&&i.val("fibo "),36===e&&i.val("fibo"),37===e&&i.val("fib"),38===e&&(i.val("fi"),o.removeClass("dgwt-wcas-close")),39===e&&i.val("f"),40===e&&(i.val(""),o.html(""),a.removeClass("dgwt-wcas-search-filled")),45===e&&(e=0)},200)},stopAnimateTyping(){var t=s(".js-dgwt-wcas-search-wrapp"),e=s(".js-dgwt-wcas-search-input"),a=s(".dgwt-wcas-preloader");a.removeClass("dgwt-wcas-close"),e.val(""),a.html(""),t.removeClass("dgwt-wcas-search-filled"),clearInterval(this.animateTypingInterval)}};var d={settingsTab:"#dgwt_wcas_troubleshooting-tab",noIssuesClass:".js-dgwt-wcas-troubleshooting-no-issues",counterClass:".js-dgwt-wcas-troubleshooting-count",issuesListClass:".js-dgwt-wcas-troubleshooting-issues",progressBar:".dgwt-wcas-troubleshooting-wrapper .progress_bar",progressBarInner:".dgwt-wcas-troubleshooting-wrapper .progress-bar-inner",fixOutofstockButtonName:"dgwt-wcas-fix-out-of-stock-relationships",maintenanceAnalyticsButtonName:"dgwt-wcas-maintenance-analytics",switchAlternativeEndpoint:"dgwt-wcas-switch-alternative-endpoint",asyncActionButtonNameBegining:"dgwt-wcas-async-action-",init:function(){var t=this;if(void 0===dgwt_wcas.troubleshooting)return;let e=dgwt_wcas.troubleshooting.tests.issues.critical+dgwt_wcas.troubleshooting.tests.issues.recommended;e>0&&(s(t.counterClass).text(e).addClass("active"),s(t.settingsTab).addClass("enabled")),dgwt_wcas.troubleshooting.tests.results_async.length>0&&s.each(dgwt_wcas.troubleshooting.tests.results_async,function(){t.appendIssue(this,!1)}),dgwt_wcas.troubleshooting.tests.direct.length>0&&s.each(dgwt_wcas.troubleshooting.tests.direct,function(){t.appendIssue(this,!1)}),dgwt_wcas.troubleshooting.tests.async.length>0&&t.maybeRunNextAsyncTest(),s(document).on("click",'input[name="'+t.fixOutofstockButtonName+'"]',function(e){s('input[name="'+t.fixOutofstockButtonName+'"]').attr("disabled","disabled").next().addClass("loading");var a={action:"dgwt_wcas_troubleshooting_fix_outofstock",_wpnonce:dgwt_wcas.troubleshooting.nonce.troubleshooting_fix_outofstock};return s.post(ajaxurl,a,function(){location.reload()}),!1}),s(document).on("click",'input[name="'+t.maintenanceAnalyticsButtonName+'"]',function(e){s('input[name="'+t.maintenanceAnalyticsButtonName+'"]').attr("disabled","disabled").next().addClass("loading");var a={action:"dgwt_wcas_troubleshooting_maintenance_analytics",_wpnonce:dgwt_wcas.troubleshooting.nonce.troubleshooting_maintenance_analytics};return s.post(ajaxurl,a,function(){location.reload()}),!1}),s(document).on("click",'input[name="'+t.switchAlternativeEndpoint+'"]',function(e){var a=1===parseInt(s(this).data("switch"))?"enable":"disable";s('input[name="'+t.switchAlternativeEndpoint+'"]').attr("disabled","disabled").next().addClass("loading");var i={action:"dgwt_wcas_troubleshooting_switch_alternative_endpoint",_wpnonce:dgwt_wcas.troubleshooting.nonce.troubleshooting_switch_alternative_endpoint,switch:a};return s.post(ajaxurl,i,function(){location.reload()}),!1}),s(document).on("click",'input[name^="'+t.asyncActionButtonNameBegining+'"]',function(t){var e=s(this);e.attr("disabled","disabled").next(".dgwt-wcas-ajax-loader").addClass("loading");var a={action:"dgwt_wcas_troubleshooting_async_action",internal_action:e.data("internal-action"),meta:e.data("meta"),_wpnonce:dgwt_wcas.troubleshooting.nonce.troubleshooting_async_action};return s.post(ajaxurl,a,function(s){var t="boolean"==typeof s.success&&s.success,a=0;"string"==typeof s.data.message&&s.data.message.length>0&&(e.next().next(".dgwt-wcas-async-action-message").text(s.data.message).removeClass("success").removeClass("error").addClass(t?"success":"error"),a=500);var i=window.location.href;i.lastIndexOf("#")>0&&(i=i.substring(0,i.lastIndexOf("#"))),"object"==typeof s.data.args&&(i=wp.url.addQueryArgs(i,s.data.args)),setTimeout(function(){window.location=i},a)}),!1}),s(document).on("change","#dgwt-wcas-send-reports-in-feature",function(){s("#dgwt-wcas-async-action-send-indexer-failure-report").data("meta",JSON.stringify({auto_send:s(this).is(":checked")}))})},appendIssue:function(t,e){var a,i=wp.template("dgwt-wcas-troubleshooting-issue"),o=s(this.issuesListClass+"-"+t.status);"good"!==t.status&&(s(this.noIssuesClass).hide(),e&&dgwt_wcas.troubleshooting.tests.issues[t.status]++,(a=dgwt_wcas.troubleshooting.tests.issues.critical+dgwt_wcas.troubleshooting.tests.issues.recommended)>0&&(s(this.counterClass).text(a).addClass("active"),s(this.settingsTab).addClass("enabled")),s(o).append(i(t)))},maybeRunNextAsyncTest:function(){var t=this;dgwt_wcas.troubleshooting.tests.async.length>0&&s.each(dgwt_wcas.troubleshooting.tests.async,function(){var e={action:"dgwt_wcas_troubleshooting_test",test:this.test,_wpnonce:dgwt_wcas.troubleshooting.nonce.troubleshooting_async_test};return!!this.completed||(this.completed=!0,s(t.progressBar).show(),s.post(ajaxurl,e,function(s){s.success&&t.appendIssue(s.data,!0),t.maybeRunNextAsyncTest()}),!1)}),t.recalculateProgression()},recalculateProgression:function(){var t=this,e=dgwt_wcas.troubleshooting.tests.async.length,a=0;s.each(dgwt_wcas.troubleshooting.tests.async,function(){this.completed&&a++});var i=Math.ceil(a/e*100);s(t.progressBarInner).css("width",i+"%"),100===i&&setTimeout(function(){s(t.progressBar).slideUp()},2e3)}},g={moveOptionClass:".js-dgwt-wcas-move-option",init:function(){var t=s(this.moveOptionClass);t.length>0&&s.each(t,function(t,e){var a=s("#"+s(e).data("move-dest").replace(/(:|\.|\[|\])/g,"\\$1"));a.length>0&&(s(e).closest("tr").hasClass("dgwt-wcas-premium-only")&&s(e).addClass("dgwt-wcas-premium-only"),s(e).clone().appendTo(a.closest("td fieldset"))),s(e).closest("tr").remove()})}},h={init:function(){"undefined"!=typeof Vue&&(Vue.component("dgwt-wcas-rule",{template:"#dgwt-wcas-settings-filters-rules-rule",components:{Selectize},props:["securitynonce","rule","rules","index"],data:()=>({isSelectActive:!0}),computed:{ruleValue(s){return this.rule.group}},watch:{rule:{handler:function(){this.$emit("update:rule",this.index)},deep:!0},ruleValue(){var s=this;this.$emit("change:group",this.index),this.isSelectActive=!1,setTimeout(function(){s.isSelectActive=!0},0)}},methods:{deleteRule(){this.$emit("delete:rule",this.index)},getSelectizeSettings(t){var e=void 0===dgwt_wcas_filters_rules_selected_options[t]?[]:dgwt_wcas_filters_rules_selected_options[t];return function({nonce:t,options:e,type:a}){return{persist:!1,maxItems:null,valueField:"key",labelField:"label",searchField:["label"],options:e,preload:!0,create:function(s){return{value:s.key,label:s.label}},load:function(e,i){s.ajax({url:ajaxurl,method:"POST",data:{action:"dgwt_wcas_settings_search_terms",query:e,type:a,_wpnonce:t},error:function(){i()},success:function(s){i(s.data)}})}}}({nonce:this.securitynonce,type:t,options:e})}}}),new Vue({el:"#dgwt-wcas-settings-filters-rules",components:{Selectize},data:()=>({rules:[]}),mounted(){try{let t=JSON.parse(this.$refs["dgwt-wcas-settings-filters-rules-ref"].value);s.each(t,function(s,e){t[s].key=Math.random()}),this.rules=t}catch(e){}this.updateInput()},methods:{addRule(){this.rules.push({group:"",values:[],key:Math.random()}),this.updateInput()},changeGroup(s){this.rules[s].values=[],this.updateInput()},deleteRule(s){this.rules=this.rules.filter(function(t,e){return e!==s}),this.updateInput()},updateInput(){let s=JSON.parse(JSON.stringify(this.rules));this.$refs["dgwt-wcas-settings-filters-rules-ref"].value=JSON.stringify(s.map(function(s){return s.key,delete s.key,s}))}}}))}};s(document).ready(function(){var w,u;(w=s(".js-dgwt-wcas-settings-margin-nob")).length>0&&w.each(function(){var t=s(this).find("td .dgwt-wcas-fieldset");if(t.length>0){var e=s(this).prev(".js-dgwt-wcas-settings-margin");if(e.length>0){var a=s(this).attr("class").split(/\s+/),i="";s.each(a,function(s,t){-1!==t.indexOf("js-dgwt-wcas-cbtgroup-")&&(i=t)});var o=t.clone(!0,!0);o.addClass("dgwt-wcas-settings-margin-nob"),i&&o.addClass(i),o.appendTo(e.find("td")),s(this).remove()}}}),t.init(),e.init(),i.init(),(u=s(".js-dgwt-wcas-sgs-autocolspan")).length>0&&u.find("td").attr("colspan",2),o.init(),n.init(),c.init(),r.init(),d.init(),g.init(),a.init(),l.init(),h.init(),window.DGWT_WCAS_SEARCH_PREVIEW.init()})}(jQuery);
