function viwpvs_frontend_init(){jQuery(".vi_wpvs_variation_form:not(.vi_wpvs_variation_form_init)").each(function(){jQuery(this).addClass("vi_wpvs_variation_form_init").viwpvs_woo_product_variation_swatches()}),jQuery(".variations_form:not(.vi_wpvs_variation_form),.variations_form:not(.vi_wpvs_variation_form_init)").each(function(){jQuery(this).addClass("vi_wpvs_variation_form vi_wpvs_variation_form_init").viwpvs_woo_product_variation_swatches()})}jQuery(document).ready(function($){"use strict";jQuery(document).on("click",".vi-wpvs-variation-style",function(a){jQuery(".vi-wpvs-variation-wrap-option-available").remove(),jQuery(".vi-wpvs-variation-wrap-option.vi-wpvs-variation-wrap-option-show").removeClass("vi-wpvs-variation-wrap-option-show"),a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation()}),jQuery(document).on("click","body",function(a){jQuery(".vi-wpvs-variation-wrap-option-available").remove(),jQuery(".vi-wpvs-variation-wrap-option.vi-wpvs-variation-wrap-option-show").removeClass("vi-wpvs-variation-wrap-option-show")}),jQuery(document).on("click",".vi-wpvs-variation-wrap-option-available .vi-wpvs-option-wrap",function(a){if(a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation(),jQuery(this).hasClass("vi-wpvs-option-wrap-disable"))return!1;let b=jQuery(".vi-wpvs-variation-wrap-option-available .vi-wpvs-option-wrap").index(jQuery(this));jQuery(".vi-wpvs-variation-wrap-option.vi-wpvs-variation-wrap-option-show").removeClass("vi-wpvs-variation-wrap-option-show").find(".vi-wpvs-option-wrap").eq(b).trigger("click"),jQuery(".vi-wpvs-variation-wrap-option-available").remove()}),jQuery(document).on("mouseenter",".vi-wpvs-variation-wrap-option-available .vi-wpvs-option-wrap",function(a){jQuery(this).hasClass("vi-wpvs-option-wrap-selected")||jQuery(this).hasClass("vi-wpvs-option-wrap-disable")||jQuery(this).hasClass("vi-wpvs-product-link")||jQuery(this).removeClass("vi-wpvs-option-wrap-default").addClass("vi-wpvs-option-wrap-hover")}),jQuery(document).on("mouseleave",".vi-wpvs-variation-wrap-option-available .vi-wpvs-option-wrap",function(a){jQuery(this).hasClass("vi-wpvs-option-wrap-selected")||jQuery(this).hasClass("vi-wpvs-option-wrap-disable")||jQuery(this).removeClass("vi-wpvs-option-wrap-hover").addClass("vi-wpvs-option-wrap-default")}),jQuery(document.body).on("vi_wpvs_variation_form",function(){jQuery(".vi_wpvs_variation_form:not(.vi_wpvs_variation_form_init)").each(function(){jQuery(this).addClass("vi_wpvs_variation_form_init").viwpvs_woo_product_variation_swatches()})}),viwpvs_frontend_init(),jQuery(document).on("woodmart-quick-view-displayed",function(a,b,c){viwpvs_frontend_init()});let a=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(){this.addEventListener("load",function(){this.responseURL.includes("/wp-admin/admin-ajax.php")&&viwpvs_frontend_init()}),a.apply(this,arguments)},jQuery(document).on("ajaxComplete",function(a,b,c){return viwpvs_frontend_init(),!1})}),jQuery(window).on("load",function(){"use strict";viwpvs_frontend_init()});let vi_wpvs_frontend=function(a){this.form=a,this.variationData=a.data("product_variations"),this.init()};function viwpvs_to_string(a){return a?a.toString():""}vi_wpvs_frontend.prototype.init=function(){let b=this,a=this.form;this.variationData&&a.find(".vi-wpvs-option-wrap.vi-wpvs-option-wrap-selected").length&&a.find(".vi-wpvs-option-wrap.vi-wpvs-option-wrap-selected").length===a.find(".vi-wpvs-select-attribute select").length&&(a.addClass("vi_wpvs_variation_form_has_selected"),a.on("reset_data",function(){a.hasClass("vi_wpvs_variation_form_has_selected")&&(a.removeClass("vi_wpvs_variation_form_has_selected"),b.hide_variation())})),a.on("woocommerce_update_variation_values",function(){b.select_variation_item()}),b.design_variation_item(),a.find(".vi-wpvs-variation-wrap-select-wrap").length&&a.find(".vi-wpvs-variation-wrap-select-wrap").each(function(d,b){jQuery(b).parent().parent().parent().css({width:"100%"});let a,c;(a=jQuery(b).find(".vi-wpvs-variation-wrap-option")).attr("data-offset_height")||a.attr("data-offset_height",a.outerHeight()).removeClass("vi-wpvs-select-hidden").addClass("vi-wpvs-hidden"),c=jQuery(b).find(".vi-wpvs-variation-button-select"),a.find(".vi-wpvs-option-wrap-selected").length&&c.find("span").html(a.find(".vi-wpvs-option-wrap-selected .vi-wpvs-option-select").html()),c.on("click",function(g){if(g.preventDefault(),g.stopPropagation(),a.hasClass("vi-wpvs-variation-wrap-option-show"))jQuery(".vi-wpvs-variation-wrap-option-available").remove(),a.removeClass("vi-wpvs-variation-wrap-option-show");else{let e,d,h,f;e=parseFloat(a.attr("data-offset_height")),d=jQuery(window).scrollTop(),h=jQuery(window).outerHeight(),f=jQuery(this).offset().top-d,jQuery(".vi-wpvs-variation-wrap-option.vi-wpvs-variation-wrap-option-show").removeClass("vi-wpvs-variation-wrap-option-show"),a.addClass("vi-wpvs-variation-wrap-option-show"),jQuery(".vi-wpvs-variation-wrap-option-available").remove();let c=jQuery(b).closest(".vi-wpvs-variation-wrap").clone();c.find(".vi-wpvs-variation-button-select").remove(),c.find(".vi-wpvs-variation-wrap-option").removeClass("vi-wpvs-hidden vi-wpvs-variation-wrap-option-show"),c.addClass("vi-wpvs-variation-wrap-option-available").css({width:jQuery(this).outerWidth(),left:jQuery(this).offset().left}),d>f||d<e||h>f+e+40?(c.toggleClass("vi-wpvs-variation-wrap-select-bottom"),c.css({top:jQuery(this).offset().top+jQuery(this).outerHeight()})):(c.toggleClass("vi-wpvs-variation-wrap-select-top"),c.css({top:jQuery(this).offset().top-a.outerHeight()})),jQuery("body").append(c)}})}),a.find(".vi-wpvs-option-wrap").each(function(e,c){let d,b,f,g;0===(b=(d=jQuery(c).closest(".vi-wpvs-variation-wrap-wrap")).find("select.vi-wpvs-select-attribute")).length&&(b=d.find(".vi-wpvs-select-attribute select").eq(0)),b.find("option").removeClass("vi-wpvs-option-disabled"),jQuery(c).on("mouseenter",function(){jQuery(this).hasClass("vi-wpvs-option-wrap-selected")||jQuery(this).hasClass("vi-wpvs-option-wrap-disable")||jQuery(this).removeClass("vi-wpvs-option-wrap-default").addClass("vi-wpvs-option-wrap-hover")}).on("mouseleave",function(){jQuery(this).hasClass("vi-wpvs-option-wrap-selected")||jQuery(this).hasClass("vi-wpvs-option-wrap-disable")||jQuery(this).removeClass("vi-wpvs-option-wrap-hover").addClass("vi-wpvs-option-wrap-default")}).on("click",function(c){if(c.stopPropagation(),jQuery(this).hasClass("vi-wpvs-option-wrap-disable"))return c.preventDefault(),c.stopPropagation(),!1;jQuery(this).parent().hasClass("vi-wpvs-variation-wrap-radio")||(c.preventDefault(),c.stopPropagation()),jQuery(".vi-wpvs-variation-wrap-option").addClass("vi-wpvs-hidden"),a.find(".reset_variations").removeClass("vi-wpvs-hidden"),d.find(".vi-wpvs-option-wrap").removeClass("vi-wpvs-option-wrap-selected vi-wpvs-option-wrap-hover").addClass("vi-wpvs-option-wrap-default"),d.find(".vi-wpvs-variation-wrap").hasClass("vi-wpvs-variation-wrap-select")&&d.find(".vi-wpvs-variation-button-select >span ").html(jQuery(this).find(".vi-wpvs-option-select").html()),jQuery(this).find(".vi-wpvs-option-radio").length>0&&(d.find(".vi-wpvs-option-radio").prop("checked",!1),jQuery(this).find(".vi-wpvs-option-radio").prop("checked",!0),jQuery(this).removeClass("vi-wpvs-option-wrap-default").addClass("vi-wpvs-option-wrap-selected")),f=viwpvs_to_string(b.val()),g=viwpvs_to_string(jQuery(this).data("attribute_value")),g!==f?(jQuery(this).removeClass("vi-wpvs-option-wrap-default").addClass("vi-wpvs-option-wrap-selected"),b.val(g).trigger("change")):jQuery(this).parent().hasClass("vi-wpvs-variation-wrap-radio")||(a.hasClass("vi_wpvs_loop_variation_form")?a.data("wpvs_double_click")?b.val("").trigger("change"):jQuery(this).removeClass("vi-wpvs-option-wrap-default").addClass("vi-wpvs-option-wrap-selected"):d.data("wpvs_double_click")?b.val("").trigger("change"):jQuery(this).removeClass("vi-wpvs-option-wrap-default").addClass("vi-wpvs-option-wrap-selected")),c.stopPropagation()})}),a.find("select:not(.vi-wpvs-select-attribute):not(.vi-wpvs-variation-style-select)").on("change",function(){setTimeout(function(){b.select_variation_item()},500)}),a.find(".reset_variations").on("click",function(){b.select_variation_item(),b.hide_variation()})},vi_wpvs_frontend.prototype.design_variation_item=function(){let a=this.form;a.find(".vi-wpvs-variation-wrap-wrap").each(function(){let a=jQuery(this),b=a.parent().parent();a.parent().addClass("vi-wpvs-variation-style-content"),a.find(`div.vi-wpvs-select-attribute select[data-attribute_name="${a.data("wpvs_attribute_name")}"]`).addClass("vi-wpvs-select-attribute"),b.addClass(a.data("display_type")),a.data("wpvs_attr_title")||b.find(".label").addClass("vi-wpvs-hidden")}),a.find(".vi-wpvs-option.vi-wpvs-option-color").each(function(c,a){let b=jQuery(a).data("option_color");jQuery(a).css({background:b})}),a.find(".vi-wpvs-variation-wrap-wrap").removeClass("vi-wpvs-hidden")},vi_wpvs_frontend.prototype.select_variation_item=function(){let a=this.form,b=this.variationData;a.find(".vi-wpvs-label-selected").addClass("vi-wpvs-hidden"),a.find(".vi-wpvs-option-wrap-out-of-stock").removeClass("vi-wpvs-option-wrap-out-of-stock"),a.find(".vi-wpvs-variation-wrap-wrap").each(function(l,c){let d=jQuery(this);if(d.data("hide_outofstock")){let m=jQuery(c).find("select option:not(.vi-wpvs-option-disabled)").map(function(){return jQuery(this).val()});jQuery(c).find(".vi-wpvs-option-wrap:not(.vi-wpvs-product-link)").each(function(c,a){let b=viwpvs_to_string(jQuery(a).data("attribute_value"));jQuery.inArray(b,m)> -1?jQuery(a).removeClass("vi-wpvs-option-wrap-disable"):jQuery(a).removeClass("vi-wpvs-option-wrap-selected").addClass("vi-wpvs-option-wrap-default vi-wpvs-option-wrap-disable")})}else{let n=jQuery(c).find("select option:not(.vi-wpvs-option-disabled)").map(function(){return jQuery(this).val()});if(jQuery(c).find(".vi-wpvs-option-wrap:not(.vi-wpvs-product-link)").each(function(c,a){let b=viwpvs_to_string(jQuery(a).data("attribute_value"));jQuery.inArray(b,n)> -1?jQuery(a).removeClass("vi-wpvs-hidden"):jQuery(a).removeClass("vi-wpvs-option-wrap-selected").addClass("vi-wpvs-option-wrap-default vi-wpvs-hidden")}),b){let h="viwpvs_default"===d.data("swatch_type")?d.find(`select[name="${d.data("wpvs_attribute_name")}"]`):d.find("select.vi-wpvs-select-attribute"),i=viwpvs_to_string(h.data("attribute_name")),j=h.val();if(d.hasClass("vi-wpvs-option-wrap-out-of-stock-attribute-checked")||(d.find(".vi-wpvs-variation-wrap").find(".vi-wpvs-option-wrap").each(function(){let e=jQuery(this),f=viwpvs_to_string(e.data("attribute_value"));if(f){let c=0,d=0;for(let g in b)if(b.hasOwnProperty(g)){let a=b[g];null!==a.attributes&& void 0!==a.attributes&&(""===a.attributes[i]?(c++,(a.hasOwnProperty("is_purchasable")&&!a.is_purchasable||a.hasOwnProperty("is_in_stock")&&!a.is_in_stock||a.hasOwnProperty("viwpvs_not_available"))&&d++):viwpvs_to_string(a.attributes[i])===f&&(c++,a.hasOwnProperty("viwpvs_not_available")&&d++))}c===d&&e.addClass("vi-wpvs-option-wrap-out-of-stock-attribute")}}),d.addClass("vi-wpvs-option-wrap-out-of-stock-attribute-checked")),j){for(let k in b)if(b.hasOwnProperty(k)){let e=b[k];if(e.attributes[i]===j&&e.hasOwnProperty("viwpvs_not_available"))for(let f in e.attributes){let o=e.attributes[f];f!==i&&a.find(`.vi-wpvs-variation-wrap[data-attribute="${f}"]`).find(".vi-wpvs-option-wrap").each(function(){let a=jQuery(this);if(!a.hasClass("vi-wpvs-option-wrap-out-of-stock-attribute")&&!a.hasClass("vi-wpvs-option-wrap-out-of-stock")&&viwpvs_to_string(a.data("attribute_value"))===o){let d=!0;for(let e in b)if(b.hasOwnProperty(e)){let c=b[e];if(c.attributes[i]===j&&c.attributes[f]===viwpvs_to_string(a.data("attribute_value"))&&!c.hasOwnProperty("viwpvs_not_available")){d=!1;break}}return d&&a.addClass("vi-wpvs-option-wrap-out-of-stock"),!1}})}}}}}if(jQuery(c).data("show_selected_item")&&jQuery(c).find(".vi-wpvs-option-wrap-selected").length){if(jQuery(c).parent().parent().find(".vi-wpvs-label-selected").length)jQuery(c).parent().parent().find(".vi-wpvs-label-selected").html(jQuery(c).find(".vi-wpvs-option-wrap-selected").data("attribute_label")).removeClass("vi-wpvs-hidden");else{let g=jQuery(c).parent().parent().find(".label");g.length||(g=jQuery(c).parent().parent().find("label")),g.css({display:"inline-flex",flexWrap:"wrap",alignItems:"center"}).append('<span class="vi-wpvs-label-selected">'+jQuery(c).find(".vi-wpvs-option-wrap-selected").data("attribute_label")+"</span>")}}})},vi_wpvs_frontend.prototype.hide_variation=function(){let a=this.form;a.find(".reset_variations").addClass("vi-wpvs-hidden"),a.find(".vi-wpvs-option-wrap").removeClass("vi-wpvs-option-wrap-selected vi-wpvs-option-wrap-out-of-stock").addClass("vi-wpvs-option-wrap-default"),a.find(".vi-wpvs-option-radio").prop("checked",!1),a.find(".vi-wpvs-variation-wrap-option").addClass("vi-wpvs-hidden"),a.find(".vi-wpvs-variation-button-select >span ").html(a.find(".vi-wpvs-option-select:first-child").html()),a.find(".vi-wpvs-variation-style .vi-wpvs-label-selected").addClass("vi-wpvs-hidden")},jQuery.fn.viwpvs_woo_product_variation_swatches=function(){return new vi_wpvs_frontend(this),this}